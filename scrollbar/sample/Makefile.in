BUILD_TOPDIR = ../..

prefix = @prefix@
exec_prefix = @exec_prefix@
libdir = @libdir@

SRC_TOPDIR = @SRC_TOPDIR@

DESTDIR = 
PREFIX = $(DESTDIR)$(prefix)
LIBDIR = $(DESTDIR)$(libdir)/mlterm

VPATH = ${SRC_TOPDIR}/scrollbar/sample

SAMPLE_OBJ = ml_sample_sb_view.o ml_transparent_sample_sb_view.o ml_sample_sb_view_lib.o 
SAMPLE2_OBJ = ml_sample2_sb_view.o ml_transparent_sample2_sb_view.o ml_sample_sb_view_lib.o
CFLAGS = $(CFLAGS_LOCAL) -I$(SRC_TOPDIR)/src @CFLAGS@ -I/usr/X11R6/include -I/usr/include/include

CC = @CC@
INSTALL = @INSTALL@
LIBTOOL = @LIBTOOL@

LIBTOOL_CC = $(LIBTOOL) --mode=compile $(CC) $(CFLAGS)
LIBTOOL_LINK = $(LIBTOOL) --mode=link $(CC)
LIBTOOL_INSTALL = $(LIBTOOL) --mode=install $(INSTALL)

.SUFFIXES: .o .c

all: sample sample2
sample: $(SAMPLE_OBJ)
	$(LIBTOOL_LINK) -o libsample.la $(SAMPLE_OBJ:.o=.lo) -rpath $(LIBDIR)

sample2: $(SAMPLE2_OBJ)
	$(LIBTOOL_LINK) -o libsample2.la $(SAMPLE2_OBJ:.o=.lo) -rpath $(LIBDIR)

.c.o:
	$(LIBTOOL_CC) -c $<

$(LIBDIR):
	mkdir -p $(LIBDIR)

install: $(LIBDIR)
	$(LIBTOOL_INSTALL) libsample.la libsample2.la $(LIBDIR)

clean:
	rm -rf $(SAMPLE_OBJ) $(SAMPLE_OBJ:.o=.lo) $(SAMPLE2_OBJ) $(SAMPLE2_OBJ:.o=.lo) \
		libsample.la libsample2.la *.core .libs
