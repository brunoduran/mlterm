top_builddir = ../..
top_srcdir = @top_srcdir@
prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@

VPATH = ${top_srcdir}/tool/mlclient

CC = @CC@
CFLAGS = @CFLAGS@ @CPPFLAGS@ @GUI_CFLAGS@
LIBS = @SOCK_LIBS@
INSTALL = @INSTALL@

BINDIR = $(DESTDIR)$(bindir)

OBJ = main.o

PROG = mlclient

TARGET_xlib = $(PROG)
TARGET_win32 = $(PROG)
TARGET_fb = $(PROG)
TARGET_quartz = $(PROG)
TARGET_console = $(PROG)-con

all: $(TARGET_@GUI@)

$(PROG): $(OBJ)
	$(CC) -o $(PROG) $(OBJ) $(LIBS) @LDFLAGS@
	cp $(PROG) $(PROG)x

$(PROG)-con: main-con.o
	$(CC) -o $(PROG)-con main-con.o $(LIBS) @LDFLAGS@

.SUFFIXES: .c.o

.c.o:
	$(CC) $(CFLAGS) -c $<

clean:
	rm -f $(OBJ) main-con.o $(PROG)* *core

distclean: clean
	rm -f Makefile

$(BINDIR):
	mkdir -p $(BINDIR)

install: $(BINDIR)
	$(INSTALL) -m 755 $(PROG)* $(BINDIR)

uninstall:
	rm -f $(BINDIR)/$(PROG) $(BINDIR)/$(PROG)x $(BINDIR)/$(PROG)-con

