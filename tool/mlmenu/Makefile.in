top_builddir = ../..
top_srcdir = @top_srcdir@
prefix = @prefix@
exec_prefix = @exec_prefix@
libexecdir = @libexecdir@
sysconfdir = @sysconfdir@

VPATH = ${top_srcdir}/tool/mlmenu

CC = @CC@
LIBTOOL = @LIBTOOL@
INSTALL = @INSTALL@

DESTDIR =
LIBEXECDIR = $(DESTDIR)$(libexecdir)
SYSCONFDIR = $(DESTDIR)$(sysconfdir)/mlterm

CFLAGS = $(CFLAGS_LOCAL) @CFLAGS@ @CPPFLAGS@ -DSYSCONFDIR=\"$(SYSCONFDIR)\"
LIBS = $(LIBS_LOCAL) -lX11

LIBTOOL_LINK = $(LIBTOOL) --mode=link $(CC)
LIBTOOL_INSTALL = $(LIBTOOL) --mode=install $(INSTALL)

PACKAGE = @PACKAGE@
VERSION = @VERSION@

OBJS = main.o

all: mlmenu

mlmenu: $(OBJS)
	$(LIBTOOL_LINK) $(OBJS) $(CFLAGS) -o mlmenu $(LIBS)

.c.o:
	$(CC) $(DEFS) $(CFLAGS) -c $<

install: $(LIBEXECDIR)
	$(LIBTOOL_INSTALL) -m 755 mlmenu $(LIBEXECDIR)

$(LIBEXECDIR):
	mkdir -p $(LIBEXECDIR)

clean:
	rm -rf $(OBJS) mlmenu mlmenu.exe *.core .libs

distclean: clean
	rm -f Makefile
